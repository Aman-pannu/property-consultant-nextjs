"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_cms_sanity_js";
exports.ids = ["_rsc_lib_cms_sanity_js"];
exports.modules = {

/***/ "(rsc)/./lib/cms/sanity.js":
/*!***************************!*\
  !*** ./lib/cms/sanity.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getListings: () => (/* binding */ getListings)\n/* harmony export */ });\nasync function getListings({ limit = 6, suburb } = {}) {\n    const pid = process.env.SANITY_PROJECT_ID;\n    const ds = process.env.SANITY_DATASET || \"production\";\n    if (!pid) return [];\n    const query = encodeURIComponent(`*[_type == \"listing\"${suburb ? ` && lower(suburb) match \"${suburb.toLowerCase()}\"` : \"\"}] | order(_createdAt desc)[0...${limit}] { _id, title, meta, \"image\": image.asset->url, badges, suburb }`);\n    const url = `https://${pid}.api.sanity.io/v2021-10-21/data/query/${ds}?query=${query}`;\n    const res = await fetch(url, {\n        cache: \"no-store\",\n        headers: {\n            Authorization: process.env.SANITY_READ_TOKEN ? `Bearer ${process.env.SANITY_READ_TOKEN}` : undefined\n        }\n    });\n    const json = await res.json();\n    return (json.result || []).map((x)=>({\n            id: x._id,\n            title: x.title,\n            meta: x.meta,\n            image: x.image,\n            badges: x.badges,\n            suburb: x.suburb\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY21zL3Nhbml0eS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sZUFBZUEsWUFBWSxFQUFFQyxRQUFRLENBQUMsRUFBRUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzFELE1BQU1DLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0lBQ3pDLE1BQU1DLEtBQU1ILFFBQVFDLEdBQUcsQ0FBQ0csY0FBYyxJQUFJO0lBQzFDLElBQUcsQ0FBQ0wsS0FBSyxPQUFPLEVBQUU7SUFDbEIsTUFBTU0sUUFBUUMsbUJBQW1CLENBQUMsb0JBQW9CLEVBQUVSLFNBQU8sQ0FBQyx5QkFBeUIsRUFBRUEsT0FBT1MsV0FBVyxHQUFHLENBQUMsQ0FBQyxHQUFDLEdBQUcsK0JBQStCLEVBQUVWLE1BQU0saUVBQWlFLENBQUM7SUFDL04sTUFBTVcsTUFBTSxDQUFDLFFBQVEsRUFBRVQsSUFBSSxzQ0FBc0MsRUFBRUksR0FBRyxPQUFPLEVBQUVFLE1BQU0sQ0FBQztJQUN0RixNQUFNSSxNQUFNLE1BQU1DLE1BQU1GLEtBQUs7UUFBRUcsT0FBTztRQUFZQyxTQUFTO1lBQUVDLGVBQWViLFFBQVFDLEdBQUcsQ0FBQ2EsaUJBQWlCLEdBQUcsQ0FBQyxPQUFPLEVBQUVkLFFBQVFDLEdBQUcsQ0FBQ2EsaUJBQWlCLENBQUMsQ0FBQyxHQUFHQztRQUFVO0lBQUM7SUFDbkssTUFBTUMsT0FBTyxNQUFNUCxJQUFJTyxJQUFJO0lBQzNCLE9BQU8sQ0FBQ0EsS0FBS0MsTUFBTSxJQUFJLEVBQUUsRUFBRUMsR0FBRyxDQUFDQyxDQUFBQSxJQUFNO1lBQ25DQyxJQUFJRCxFQUFFRSxHQUFHO1lBQUVDLE9BQU9ILEVBQUVHLEtBQUs7WUFBRUMsTUFBTUosRUFBRUksSUFBSTtZQUFFQyxPQUFPTCxFQUFFSyxLQUFLO1lBQUVDLFFBQVFOLEVBQUVNLE1BQU07WUFBRTNCLFFBQVFxQixFQUFFckIsTUFBTTtRQUM3RjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvcGVydHktY29uc3VsdGFudC8uL2xpYi9jbXMvc2FuaXR5LmpzPzY3ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExpc3RpbmdzKHsgbGltaXQgPSA2LCBzdWJ1cmIgfSA9IHt9KXtcbiAgY29uc3QgcGlkID0gcHJvY2Vzcy5lbnYuU0FOSVRZX1BST0pFQ1RfSURcbiAgY29uc3QgZHMgID0gcHJvY2Vzcy5lbnYuU0FOSVRZX0RBVEFTRVQgfHwgJ3Byb2R1Y3Rpb24nXG4gIGlmKCFwaWQpIHJldHVybiBbXVxuICBjb25zdCBxdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChgKltfdHlwZSA9PSBcImxpc3RpbmdcIiR7c3VidXJiP2AgJiYgbG93ZXIoc3VidXJiKSBtYXRjaCBcIiR7c3VidXJiLnRvTG93ZXJDYXNlKCl9XCJgOicnfV0gfCBvcmRlcihfY3JlYXRlZEF0IGRlc2MpWzAuLi4ke2xpbWl0fV0geyBfaWQsIHRpdGxlLCBtZXRhLCBcImltYWdlXCI6IGltYWdlLmFzc2V0LT51cmwsIGJhZGdlcywgc3VidXJiIH1gKVxuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke3BpZH0uYXBpLnNhbml0eS5pby92MjAyMS0xMC0yMS9kYXRhL3F1ZXJ5LyR7ZHN9P3F1ZXJ5PSR7cXVlcnl9YFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgY2FjaGU6ICduby1zdG9yZScsIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogcHJvY2Vzcy5lbnYuU0FOSVRZX1JFQURfVE9LRU4gPyBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuU0FOSVRZX1JFQURfVE9LRU59YCA6IHVuZGVmaW5lZCB9fSlcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKClcbiAgcmV0dXJuIChqc29uLnJlc3VsdCB8fCBbXSkubWFwKHggPT4gKHtcbiAgICBpZDogeC5faWQsIHRpdGxlOiB4LnRpdGxlLCBtZXRhOiB4Lm1ldGEsIGltYWdlOiB4LmltYWdlLCBiYWRnZXM6IHguYmFkZ2VzLCBzdWJ1cmI6IHguc3VidXJiXG4gIH0pKVxufVxuIl0sIm5hbWVzIjpbImdldExpc3RpbmdzIiwibGltaXQiLCJzdWJ1cmIiLCJwaWQiLCJwcm9jZXNzIiwiZW52IiwiU0FOSVRZX1BST0pFQ1RfSUQiLCJkcyIsIlNBTklUWV9EQVRBU0VUIiwicXVlcnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0xvd2VyQ2FzZSIsInVybCIsInJlcyIsImZldGNoIiwiY2FjaGUiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsIlNBTklUWV9SRUFEX1RPS0VOIiwidW5kZWZpbmVkIiwianNvbiIsInJlc3VsdCIsIm1hcCIsIngiLCJpZCIsIl9pZCIsInRpdGxlIiwibWV0YSIsImltYWdlIiwiYmFkZ2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/cms/sanity.js\n");

/***/ })

};
;